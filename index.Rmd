---
title: "Análisis de Componentes Principales (PCA) del Dataset 'swiss'"
output: html_notebook
---

## Introducción

El dataset "swiss" es un conjunto de datos clásico incluido en R que contiene información sobre fertilidad y diversos indicadores socioeconómicos de 47 provincias francófonas de Suiza alrededor de 1888. Este análisis explorará las relaciones entre estas variables utilizando el Análisis de Componentes Principales (PCA), una técnica de reducción de dimensionalidad que nos permite identificar patrones subyacentes en los datos.

```{r}
# Cargar el dataset
data("swiss")
head(swiss)
```

**El dataset contiene las siguientes variables**:

- Fertility: Tasa de fertilidad común (Ig).
- Agriculture: % de población masculina empleada en agricultura.
- Examination: % de reclutas que obtienen calificación máxima en examen del ejército.
- Education: % de población con educación más allá de primaria.
- Catholic: % de población católica (vs protestante).
- Infant.Mortality: % de niños que mueren antes de cumplir un año.

```{r echo=TRUE}
# Resumen estadístico
summary(swiss)
```

## Preprocesamiento de datos

Antes de realizar el PCA, es importante escalar las variables ya que están en diferentes unidades:

```{r echo=TRUE}
# Escalar los datos (centrar y escalar)
swiss_scaled <- scale(swiss)
```

## Análisis de Componentes Principales

Realizamos el PCA utilizando la función ``prcomp()``:

```{r echo=TRUE}
# Realizar PCA
pca_result <- prcomp(swiss_scaled, center = TRUE, scale. = TRUE)
# Resumen del PCA
summary(pca_result)
```

## Visualización de los resultados

Varianza explicada:

```{r echo=TRUE}
# Gráfico de varianza explicada
plot(pca_result, type = "l", main = "Varianza explicada por cada componente")
```

```{r echo=TRUE}
# Varianza acumulada
cumulative_var <- cumsum(pca_result$sdev^2 / sum(pca_result$sdev^2))
barplot(cumulative_var, 
        names.arg = paste0("PC", 1:length(cumulative_var)),
        xlab = "Componentes principales",
        ylab = "Varianza explicada acumulada",
        main = "Varianza explicada acumulada")
abline(h = 0.9, col = "red", lty = 2)
```

## Círculo de correlaciones

```{r echo=TRUE}
# Círculo de correlaciones
library(factoextra)
fviz_pca_var(pca_result,
             col.var = "contrib",
             gradient.cols = c("#00AFBB", "#E7B800", "#FC4E07"),
             repel = TRUE)
```

## Interpretación de los Componentes

```{r echo=TRUE}
# Cargas (loadings) de los componentes
pca_result$rotation[, 1:2]
```

```{r echo=TRUE}
# Información de la sesión
sessionInfo()
```